const arrz = require("array_helperz")
const { getAllTagSnippetJoins, getAllProblemJoins, getAllCheatsheetJoins, getAllTaskJoins } = require("./oneToMany.js")


/**
 * mostRecentlyCreatedProblems(knex, user_id)
 * @author zen-out
 * @date 2022-03-22
 * @param {any} knex
 * @param {any}  user_id
 * @returns {any}
 */
async function mostRecentlyCreatedProblems(knex, user_id) {
    let merged = await getAllProblemJoins(knex, user_id)
    merged = arrz.sortDesc(merged, "created", "date")
    return merged;
}
async function mostRecentlyCreatedCheatsheets(knex, user_id) {
    let trimmed = await getAllCheatsheetJoins(knex, user_id)
    let sorted = arrz.sortDesc(trimmed, "created", "date")
    return sorted;
}
async function mostRecentlyCreatedTasks(knex, user_id) {
    let trimmed = await getAllTaskJoins(knex, user_id)
    let sorted = arrz.sortDesc(trimmed, "created", "date")
    return sorted;
}
async function mostRecentlyCreatedTagSnippets(knex, user_id) {
    let trimmed = await getAllTagSnippetJoins(knex, user_id)
    let sorted = arrz.sortDesc(trimmed, "created", "date")
    return sorted;
}
async function testMostRecentlyCreated() {
    let problems = await mostRecentlyCreatedProblems(knex, 1)
    for (let i = 0; i < problems.length; i++) {
        if (problems[i]["problem_id"] === 32) {
            console.log(problems[i])
        }
    }
    let tasks = await mostRecentlyCreatedTasks(knex, 1)
    let tagsnippets = await mostRecentlyCreatedTagSnippets(knex, 1)
    let cheatsheets = await mostRecentlyCreatedCheatsheets(knex, 1)
}
module.exports = { mostRecentlyCreatedProblems, mostRecentlyCreatedCheatsheets, mostRecentlyCreatedTasks, mostRecentlyCreatedTagSnippets, testMostRecentlyCreated };