const arrz = require("array_helperz")

const { getAllTagSnippetJoins, getAllProblemJoins, getAllCheatsheetJoins, getAllTaskJoins } = require("./oneToMany.js")
const { knex } = require("./knex")


async function difficultProblems(knex, user_id) {
    let trimmed = await getAllProblemJoins(knex, user_id)
    let sorted = arrz.sortAsc(trimmed, "difficulty", "integer")
    return sorted
}
async function difficultCheatsheets(knex, user_id) {
    let trimmed = await getAllCheatsheetJoins(knex, user_id)
    let sorted = arrz.sortAsc(trimmed, "difficulty", "integer")
    return sorted
}
async function difficultTasks(knex, user_id) {
    let trimmed = await getAllTaskJoins(knex, user_id)
    let sorted = arrz.sortAsc(trimmed, "difficulty", "integer")
    return sorted
}
async function difficultTagSnippets(knex, user_id) {
    let trimmed = await getAllTagSnippetJoins(knex, user_id)
    let sorted = arrz.sortAsc(trimmed, "difficulty", "integer")
    return sorted
}
async function testDifficult() {
    let problems = await difficultProblems(knex, 1)
    console.log(problems[0], problems[problems.length - 1])
    let tasks = await difficultTasks(knex, 1)
    let tagsnippets = await difficultTagSnippets(knex, 1)
    let cheatsheets = await difficultCheatsheets(knex, 1)
}


module.exports = { difficultProblems, difficultCheatsheets, difficultTasks, difficultTagSnippets, testDifficult };